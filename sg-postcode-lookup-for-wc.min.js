!function(c){var i=[];function o(e,o){String.fromCharCode(e.keyCode).match(/[^0-9]/g)||(e=e.target.value.replace(/[^0-9]/g,""),/^\d{6}$/.test(e)&&n(e,o,document.getElementById(o+"_sg_postcode_lookup_button_field_button")))}function n(d,n,s){var r,e;void 0===i[d+"_"+n]?(e="action=sg_postcode_lookup_wc",e+="&postcode="+d,e+="&address_type="+n,XMLHttpRequest&&(s&&(s.innerText=sg_postcode_lookup_for_wc.searching_text,s.disabled=!0),(r=new XMLHttpRequest).open("POST",sg_postcode_lookup_for_wc.ajax_url),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onload=function(){s&&(s.innerText=sg_postcode_lookup_for_wc.button_text,s.disabled=!1);var e,o,t=JSON.parse(r.responseText);t.error_code?alert(t.error):(i[d+"_"+n]=t,e=t,(o=document.getElementById(e.address_type+"_postcode"))&&e.postcode&&(o.value=e.postcode),l(t))},r.onerror=function(){s&&(s.innerText=sg_postcode_lookup_for_wc.button_text,s.disabled=!1)},r.send(e))):l(i[d+"_"+n])}function l(e){var o=e.address_type+"_sg-postcode-lookup-for-woocommerce-address-selector",t=document.getElementById(o);t&&t.parentNode.removeChild(t),0<e.address_count&&(document.getElementById(e.address_type+"_sg_postcode_lookup_button_field").insertAdjacentHTML("afterend",e.fragment.trim()),1==e.address_count?(t=1,e=(e=e).address_type+"_sg-postcode-lookup-for-woocommerce-address-selector-select",!(e=document.getElementById(e))||(e=c(e)).children().length>=t&&(t=e.find("option:eq("+t+")").val(),e.val(t).change()),c("#"+o).hide()):c("#"+o).show())}c("#billing_postcode").on("keyup",function(e){o(e,"billing")}),c("#shipping_postcode").on("keyup",function(e){o(e,"shipping")});var e=document.getElementsByClassName("sg-postcode-lookup-button");if(0<e.length)for(var t=0;t<e.length;t++)e[t].addEventListener("click",function(e){var o,t,d;d="",-1<(o=this).id.indexOf("billing_")?d="billing":-1<o.id.indexOf("shipping_")&&(d="shipping"),!d||0<(t=document.getElementById(d+"_postcode").value.replace(/[^0-9]/g,"")).length&&n(t,d,o)});if(c(".woocommerce-address-fields, .woocommerce-billing-fields, .woocommerce-shipping-fields").on("change","select",function(e){var o;"billing_sg-postcode-lookup-for-woocommerce-address-selector-select"!=e.target.id&&"shipping_sg-postcode-lookup-for-woocommerce-address-selector-select"!=e.target.id||(""==(o=e.target.options[e.target.selectedIndex].value)&&(o="||||"),function(e,o){var t="billing";-1<e.indexOf("shipping_")&&(t="shipping");for(var d,n=o.split("|"),s=["address_1","address_2","city","state"],r=0;r<s.length;r++)d=t+"_"+s[r],null!==(d=document.getElementById(d))&&(d.value=n[r]);c(document.body).trigger("update_checkout")}(e.target.id,o))}),sg_postcode_lookup_for_wc.clear_additional_fields){var d=document.getElementsByClassName("woocommerce-additional-fields__field-wrapper");if(0<d.length)for(t=0;t<d.length;t++)d[t].style.clear="both"}}(jQuery);